# Implementation Plan

- [x] 1. Set up i18n infrastructure and routing configuration
  - [x] 1.1 Install next-intl package
    - Run `bun add next-intl`
    - _Requirements: 1.4, 2.1_
  - [x] 1.2 Create routing configuration
    - Create `src/i18n/routing.ts` with defineRouting
    - Configure locales: ['id', 'en'] with 'id' as default
    - Set localePrefix to 'always'
    - _Requirements: 1.4, 2.1_
  - [x] 1.3 Create request configuration
    - Create `src/i18n/request.ts` with getRequestConfig
    - Implement dynamic message loading based on locale
    - _Requirements: 3.2, 4.4_
  - [x] 1.4 Create navigation APIs
    - Create `src/i18n/navigation.ts`
    - Export Link, redirect, usePathname, useRouter, getPathname
    - _Requirements: 2.3_
  - [x] 1.5 Update Next.js configuration
    - Integrate next-intl plugin in `next.config.ts`
    - _Requirements: 2.2_

- [x] 2. Create translation message files
  - [x] 2.1 Create Indonesian translation file
    - Create `messages/id.json` with all translation keys
    - Include common, auth, navigation, and errors namespaces
    - _Requirements: 3.1_
  - [x] 2.2 Create English translation file
    - Create `messages/en.json` with all translation keys
    - Mirror structure of Indonesian file
    - _Requirements: 3.1_
  - [ ]* 2.3 Write property test for translation message round-trip
    - **Property 4: Translation Message Round-Trip**
    - **Validates: Requirements 3.4, 3.5**

- [x] 3. Restructure app directory for locale-based routing
  - [x] 3.1 Create locale layout
    - Create `src/app/[locale]/layout.tsx`
    - Implement locale validation with hasLocale
    - Wrap children with NextIntlClientProvider
    - _Requirements: 4.3, 7.1, 7.2_
  - [x] 3.2 Move route groups under locale segment
    - Move `src/app/(app)` to `src/app/[locale]/(app)`
    - Move `src/app/(auth)` to `src/app/[locale]/(auth)`
    - Update imports as needed
    - _Requirements: 7.3_
  - [x] 3.3 Create localized not-found page
    - Create `src/app/[locale]/not-found.tsx`
    - _Requirements: 1.3_
  - [ ]* 3.4 Write property test for invalid locale rejection
    - **Property 3: Invalid Locale Rejection**
    - **Validates: Requirements 1.3, 7.2**

- [x] 4. Update proxy for i18n integration
  - [x] 4.1 Integrate i18n routing with existing proxy
    - Update `src/proxy.ts` to integrate next-intl middleware
    - Chain i18n locale routing before auth logic
    - Update AUTH_ROUTES and PUBLIC_ROUTES patterns to include locale prefix (e.g., '/[locale]/signin')
    - _Requirements: 6.1, 6.2, 6.3_
  - [ ]* 4.2 Write property test for default locale redirect
    - **Property 1: Default Locale Redirect**
    - **Validates: Requirements 1.1**
  - [ ]* 4.3 Write property test for valid locale acceptance
    - **Property 2: Valid Locale Acceptance**
    - **Validates: Requirements 1.2**

- [ ] 5. Checkpoint - Ensure all tests pass
  - Ensure all tests pass, ask the user if questions arise.

- [x] 6. Update auth module components with translations
  - [x] 6.1 Update signin form with translations
    - Import useTranslations hook
    - Replace hardcoded strings with translation keys
    - _Requirements: 4.2_
  - [x] 6.2 Update signup form with translations
    - Import useTranslations hook
    - Replace hardcoded strings with translation keys
    - _Requirements: 4.2_
  - [x] 6.3 Update signout button with translations
    - Import useTranslations hook
    - Replace hardcoded strings with translation keys
    - _Requirements: 4.2_
  - [ ]* 6.4 Write property test for translation key lookup
    - **Property 6: Translation Key Lookup**
    - **Validates: Requirements 3.3**

- [x] 7. Create language switcher component
  - [x] 7.1 Create language switcher component
    - Create `src/shared/components/language-switcher.tsx`
    - Display all supported locales with native names
    - Use next-intl Link for locale switching
    - _Requirements: 5.1, 5.2, 5.3_
  - [ ]* 7.2 Write property test for language switch URL generation
    - **Property 7: Language Switch URL Generation**
    - **Validates: Requirements 5.1, 5.2**

- [x] 8. Update page components with translations
  - [x] 8.1 Update auth layout metadata with translations
    - Use getTranslations for server-side metadata
    - _Requirements: 4.1_
  - [x] 8.2 Update signin page with translations
    - Use getTranslations for page metadata
    - _Requirements: 4.1_
  - [x] 8.3 Update signup page with translations
    - Use getTranslations for page metadata
    - _Requirements: 4.1_
  - [x] 8.4 Update home page with translations
    - Add translations to main app page
    - _Requirements: 4.1, 4.2_
  - [ ]* 8.5 Write property test for dynamic message loading
    - **Property 5: Dynamic Message Loading**
    - **Validates: Requirements 3.2**

- [ ] 9. Final Checkpoint - Ensure all tests pass
  - Ensure all tests pass, ask the user if questions arise.
